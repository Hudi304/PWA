<!DOCTYPE html>
<html>

<head>
  <title></title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta charset="utf-8" />
  <!--  manifest  -->
  <link rel="manifest" href="./manifest.json" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="icon" type="image/jpg" href="./img/car-1.jpg" />

  <meta name="theme-color" content="#2A3443" />
  <meta name="description" content="PWA_test" />

  <!-- iOS -->
  <link rel="apple-touch-icon" href="./img/96X96.png" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-status-bar-style" content="black" />
  <meta name="mobile-web-app-title" content="Carzone" />

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

  <!-- manifest ends -->

  <link rel="stylesheet" type="text/css" href="css/ie10-viewport-bug-workaround.css" />

  <script src="js/ie-emulation-modes-warning.js"></script>
</head>

<body>
  <style>
    body {
      padding: 0px;
      margin: 0px;
      background-color: rgb(62, 109, 196);
    }

    button {
      height: 40px;
      border: 2px solid #555555;
    }

    button:active {
      box-shadow: 0 3px 4px 0 rgba(0, 0, 0, 0.24),
        0 4px 5px 0 rgba(0, 46, 114, 0.19);
    }
  </style>

  <script src="js/jquery-2.2.0.min.js"></script>

  <script src="js/jnoty.js"></script>
  <script src="js/app.js"></script>


  <div id="wrapper"
    style="display: flex; padding: 8px; flex-direction: column; gap: 10px; justify-content: center; align-items: center; height: 100vh;">

  </div>

  <script>
    if (isThisDeviceRunningiOS() === true) {
      createButton("Call Dani from IPhone", "tel:0754302599", "fa fa-phone");

      createButton(
        "Mail Dani from IPhone",
        "mailto:hudisteanu.ma@gmail.com?body=Hello",
        "fa fa-inbox"
      );

      createButtonWithClick(
        "SMS Dani from IPhone",
        "#",
        "fa fa-envelope",
        openSMSMobile
      );

      createButton(
        "Facetime Video Dani",
        "facetime:ilie.filip@techquarter.io",
        "fa fa-video-camera"
      );

      createButton(
        "Facetime Audio Dani",
        "facetime-audio:ilie.filip@techquarter.io",
        "fa fa-microphone"
      );
    } else if (isAndroidDevice() === true) {
      createInstallButton("Install");

      createButton("Call Dani from Android", "tel:0754302599", "fa fa-phone");

      createButton(
        "SMS Dani from Android",
        "sms:0756230357?body=Hello",
        "fa fa-envelope"
      );

      createButton(
        "Mail Dani from Android",
        "mailto:hudisteanu.ma@gmail.com?body=Hello",
        "fa fa-inbox"
      );
    } else {
      createInstallButton("Install");

      createButton("Call Dani from PC", "tel:0754302599", "fa fa-phone");

      createButton(
        "Mail Dani from PC",
        "mailto:hudisteanu.ma@gmail.com?body=Hello",
        "fa fa-inbox"
      );

      createButton(
        "Skype Dani from PC",
        "callto:0756230357?body=Hello",
        "fa fa-skype"
      );
    }

    function isThisDeviceRunningiOS() {
      if (
        [
          "iPad Simulator",
          "iPhone Simulator",
          "iPod Simulator",
          "iPad",
          "iPhone",
          "iPod",
        ].includes(navigator.platform)
      ) {
        return true;
      }
      // iPad on iOS 13
      else if (
        navigator.userAgent.includes("Mac") &&
        "ontouchend" in document
      ) {
        return true;
      } else {
        return false;
      }
    }

    function isAndroidDevice() {
      var userAgent = navigator.userAgent.toLowerCase();
      var Android = userAgent.indexOf("android") > -1;

      if (Android) {
        return true;
      }
      return false;
    }

    function openSMSMobile(e) {
      window.open("sms:0754302599&body=hello", "_self");
      return false;
    }

    let deferredPrompt;

    window.addEventListener("beforeinstallprompt", (e) => {
      deferredPrompt = e;
    });

    const installApp = document.getElementById("installApp");

    installApp.addEventListener("click", async () => {
      if (deferredPrompt !== null) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        if (outcome === "accepted") {
          deferredPrompt = null;
        }
      }
    });
  </script>
</body>

</html>
